{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/Zhuanz/Downloads/ai-writing-platform-2/app/api/generate-article/route.ts"],"sourcesContent":["import { streamText } from \"ai\"\nimport { createDeepSeek } from \"@ai-sdk/deepseek\"\n\nexport const maxDuration = 60\n\n// 使用官方 DeepSeek provider\nconst deepseek = createDeepSeek({\n  apiKey: process.env.DEEPSEEK_API_KEY,\n})\n\nconst ARTICLE_TYPE_PROMPTS: Record<string, string> = {\n  blog: \"以友好、专业的博客风格撰写\",\n  news: \"以客观、专业的新闻报道风格撰写\",\n  academic: \"以严谨、学术的论文风格撰写\",\n  marketing: \"以吸引人、有说服力的营销文案风格撰写\",\n}\n\nconst LENGTH_TOKENS: Record<string, number> = {\n  short: 1000,\n  medium: 2000,\n  long: 4000,\n}\n\nexport async function POST(req: Request) {\n  const { topic, outline, articleType, length } = await req.json()\n\n  const stylePrompt = ARTICLE_TYPE_PROMPTS[articleType] || ARTICLE_TYPE_PROMPTS.blog\n  const maxTokens = LENGTH_TOKENS[length] || LENGTH_TOKENS.medium\n\n  const systemPrompt = `你是一位专业的内容写作专家。${stylePrompt}。\n请根据用户提供的主题和大纲生成高质量的文章。\n文章应该：\n- 结构清晰，有明确的开头、正文和结尾\n- 内容丰富，有深度\n- 语言流畅，易于阅读\n- 适当使用标题和段落分隔\n请直接输出文章内容，不要包含额外的解释或说明。`\n\n  const userPrompt = `请为以下主题撰写一篇文章：\n\n主题：${topic}\n${outline ? `\\n大纲/要点：\\n${outline}` : \"\"}`\n\n  const result = streamText({\n    model: deepseek(\"deepseek-chat\"),\n    system: systemPrompt,\n    prompt: userPrompt,\n    maxOutputTokens: maxTokens,\n    temperature: 0.7,\n  })\n\n  return result.toTextStreamResponse()\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,MAAM,cAAc;AAE3B,yBAAyB;AACzB,MAAM,WAAW,IAAA,6KAAc,EAAC;IAC9B,QAAQ,QAAQ,GAAG,CAAC,gBAAgB;AACtC;AAEA,MAAM,uBAA+C;IACnD,MAAM;IACN,MAAM;IACN,UAAU;IACV,WAAW;AACb;AAEA,MAAM,gBAAwC;IAC5C,OAAO;IACP,QAAQ;IACR,MAAM;AACR;AAEO,eAAe,KAAK,GAAY;IACrC,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,IAAI;IAE9D,MAAM,cAAc,oBAAoB,CAAC,YAAY,IAAI,qBAAqB,IAAI;IAClF,MAAM,YAAY,aAAa,CAAC,OAAO,IAAI,cAAc,MAAM;IAE/D,MAAM,eAAe,CAAC,cAAc,EAAE,YAAY;;;;;;;uBAO7B,CAAC;IAEtB,MAAM,aAAa,CAAC;;GAEnB,EAAE,MAAM;AACX,EAAE,UAAU,CAAC,UAAU,EAAE,SAAS,GAAG,IAAI;IAEvC,MAAM,SAAS,IAAA,oKAAU,EAAC;QACxB,OAAO,SAAS;QAChB,QAAQ;QACR,QAAQ;QACR,iBAAiB;QACjB,aAAa;IACf;IAEA,OAAO,OAAO,oBAAoB;AACpC"}}]
}